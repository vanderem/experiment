var jsPsychIatHtml=function(s){"use strict";var p="2.1.0";const d={name:"iat-html",version:p,parameters:{stimulus:{type:s.ParameterType.HTML_STRING,default:void 0},left_category_key:{type:s.ParameterType.KEY,default:"e"},right_category_key:{type:s.ParameterType.KEY,default:"i"},left_category_label:{type:s.ParameterType.STRING,array:!0,default:["left"]},right_category_label:{type:s.ParameterType.STRING,array:!0,default:["right"]},key_to_move_forward:{type:s.ParameterType.KEYS,default:"ALL_KEYS"},display_feedback:{type:s.ParameterType.BOOL,default:!1},html_when_wrong:{type:s.ParameterType.HTML_STRING,default:'<span style="color: red; font-size: 80px">X</span>'},bottom_instructions:{type:s.ParameterType.HTML_STRING,default:"<p>If you press the wrong key, a red X will appear. Press any key to continue.</p>"},force_correct_key_press:{type:s.ParameterType.BOOL,default:!1},stim_key_association:{type:s.ParameterType.SELECT,options:["left","right"],default:void 0},response_ends_trial:{type:s.ParameterType.BOOL,default:!0},trial_duration:{type:s.ParameterType.INT,default:null}},data:{stimulus:{type:s.ParameterType.HTML_STRING},response:{type:s.ParameterType.STRING},correct:{type:s.ParameterType.BOOL},rt:{type:s.ParameterType.INT}},citations:{apa:"de Leeuw, J. R., Gilbert, R. A., & Luchterhandt, B. (2023). jsPsych: Enabling an Open-Source Collaborative Ecosystem of Behavioral Experiments. Journal of Open Source Software, 8(85), 5351. https://doi.org/10.21105/joss.05351 ",bibtex:'@article{Leeuw2023jsPsych, 	author = {de Leeuw, Joshua R. and Gilbert, Rebecca A. and Luchterhandt, Bj{\\" o}rn}, 	journal = {Journal of Open Source Software}, 	doi = {10.21105/joss.05351}, 	issn = {2475-9066}, 	number = {85}, 	year = {2023}, 	month = {may 11}, 	pages = {5351}, 	publisher = {Open Journals}, 	title = {jsPsych: Enabling an {Open}-{Source} {Collaborative} {Ecosystem} of {Behavioral} {Experiments}}, 	url = {https://joss.theoj.org/papers/10.21105/joss.05351}, 	volume = {8}, }  '}};class _{constructor(t){this.jsPsych=t}trial(t,e){var a="";a+="<div style='position: absolute; height: 20%; width: 100%; margin-left: auto; margin-right: auto; top: 42%; left: 0; right: 0'><p id='jspsych-iat-stim'>"+e.stimulus+"</p></div>",a+="<div id='trial_left_align' style='position: absolute; top: 18%; left: 20%'>",e.left_category_label.length==1?a+="<p>Press "+e.left_category_key+" for:<br> "+e.left_category_label[0].bold()+"</p></div>":a+="<p>Press "+e.left_category_key+" for:<br> "+e.left_category_label[0].bold()+"<br>or<br>"+e.left_category_label[1].bold()+"</p></div>",a+="<div id='trial_right_align' style='position: absolute; top: 18%; right: 20%'>",e.right_category_label.length==1?a+="<p>Press "+e.right_category_key+" for:<br> "+e.right_category_label[0].bold()+"</p></div>":a+="<p>Press "+e.right_category_key+" for:<br> "+e.right_category_label[0].bold()+"<br>or<br>"+e.right_category_label[1].bold()+"</p></div>",a+="<div id='wrongImgID' style='position:relative; top: 300px; margin-left: auto; margin-right: auto; left: 0; right: 0'>",e.display_feedback===!0&&(a+="<div id='wrongImgContainer' style='visibility: hidden; position: absolute; top: -75px; margin-left: auto; margin-right: auto; left: 0; right: 0'><p>"+e.html_when_wrong+"</p></div>"),a+="<div>"+e.bottom_instructions+"</div>",a+="</div>",t.innerHTML=a;var r={rt:null,key:null,correct:!1};const i=()=>{typeof c!="undefined"&&this.jsPsych.pluginAPI.cancelKeyboardResponse(c);var o={rt:r.rt,stimulus:e.stimulus,response:r.key,correct:r.correct};this.jsPsych.finishTrial(o)};var l=e.left_category_key,u=e.right_category_key;const g=o=>{var n=document.getElementById("wrongImgContainer");if(t.querySelector("#jspsych-iat-stim").className+=" responded",r.key==null&&(r.key=o.key,r.rt=o.rt),e.stim_key_association=="right")if(r.rt!==null&&this.jsPsych.pluginAPI.compareKeys(r.key,u))r.correct=!0,e.response_ends_trial&&i();else if(r.correct=!1,!e.response_ends_trial&&e.display_feedback==!0&&(n.style.visibility="visible"),e.response_ends_trial&&e.display_feedback==!0)if(n.style.visibility="visible",e.force_correct_key_press)var y=this.jsPsych.pluginAPI.getKeyboardResponse({callback_function:i,valid_responses:[e.right_category_key]});else var y=this.jsPsych.pluginAPI.getKeyboardResponse({callback_function:i,valid_responses:e.key_to_move_forward});else e.response_ends_trial&&e.display_feedback!=!0?i():!e.response_ends_trial&&e.display_feedback!=!0;else if(e.stim_key_association=="left")if(r.rt!==null&&this.jsPsych.pluginAPI.compareKeys(r.key,l))r.correct=!0,e.response_ends_trial&&i();else if(r.correct=!1,!e.response_ends_trial&&e.display_feedback==!0&&(n.style.visibility="visible"),e.response_ends_trial&&e.display_feedback==!0)if(n.style.visibility="visible",e.force_correct_key_press)var y=this.jsPsych.pluginAPI.getKeyboardResponse({callback_function:i,valid_responses:[e.left_category_key]});else var y=this.jsPsych.pluginAPI.getKeyboardResponse({callback_function:i,valid_responses:e.key_to_move_forward});else e.response_ends_trial&&e.display_feedback!=!0?i():!e.response_ends_trial&&e.display_feedback!=!0};if(e.left_category_key!="NO_KEYS"&&e.right_category_key!="NO_KEYS")var c=this.jsPsych.pluginAPI.getKeyboardResponse({callback_function:g,valid_responses:[e.left_category_key,e.right_category_key],rt_method:"performance",persist:!1,allow_held_key:!1});e.trial_duration!==null&&e.response_ends_trial!=!0&&this.jsPsych.pluginAPI.setTimeout(()=>{i()},e.trial_duration)}simulate(t,e,a,r){e=="data-only"&&(r(),this.simulate_data_only(t,a)),e=="visual"&&this.simulate_visual(t,a,r)}create_simulation_data(t,e){const a=this.jsPsych.pluginAPI.getValidKey([t.left_category_key,t.right_category_key]),r=t.stim_key_association=="left"?a==t.left_category_key:a==t.right_category_key,i={stimulus:t.stimulus,response:a,rt:this.jsPsych.randomization.sampleExGaussian(500,50,1/150,!0),correct:r},l=this.jsPsych.pluginAPI.mergeSimulationData(i,e);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(t,l),l}simulate_data_only(t,e){const a=this.create_simulation_data(t,e);this.jsPsych.finishTrial(a)}simulate_visual(t,e,a){const r=this.create_simulation_data(t,e),i=this.jsPsych.getDisplayElement();this.trial(i,t),a(),r.response!==null&&this.jsPsych.pluginAPI.pressKey(r.response,r.rt);const l=r.rt==null?t.trial_duration:r.rt;t.force_correct_key_press?r.correct||this.jsPsych.pluginAPI.pressKey(t.stim_key_association=="left"?t.left_category_key:t.right_category_key,l+this.jsPsych.randomization.sampleExGaussian(500,50,.006666666666666667,!0)):this.jsPsych.pluginAPI.pressKey(this.jsPsych.pluginAPI.getValidKey(t.key_to_move_forward),l+this.jsPsych.randomization.sampleExGaussian(500,50,.006666666666666667,!0))}}return _.info=d,_}(jsPsychModule);
//# sourceMappingURL=https://unpkg.com/@jspsych/plugin-iat-html@2.1.0/dist/index.browser.min.js.map
