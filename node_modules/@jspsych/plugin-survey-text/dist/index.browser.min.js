var jsPsychSurveyText=function(n){"use strict";var f="2.1.0";const v={name:"survey-text",version:f,parameters:{questions:{type:n.ParameterType.COMPLEX,array:!0,default:void 0,nested:{prompt:{type:n.ParameterType.HTML_STRING,default:void 0},placeholder:{type:n.ParameterType.STRING,default:""},rows:{type:n.ParameterType.INT,default:1},columns:{type:n.ParameterType.INT,default:40},required:{type:n.ParameterType.BOOL,default:!1},name:{type:n.ParameterType.STRING,default:""}}},randomize_question_order:{type:n.ParameterType.BOOL,default:!1},preamble:{type:n.ParameterType.HTML_STRING,default:null},button_label:{type:n.ParameterType.STRING,default:"Continue"},autocomplete:{type:n.ParameterType.BOOL,default:!1}},data:{response:{type:n.ParameterType.OBJECT},rt:{type:n.ParameterType.INT},question_order:{type:n.ParameterType.INT,array:!0}},citations:{apa:"de Leeuw, J. R., Gilbert, R. A., & Luchterhandt, B. (2023). jsPsych: Enabling an Open-Source Collaborative Ecosystem of Behavioral Experiments. Journal of Open Source Software, 8(85), 5351. https://doi.org/10.21105/joss.05351 ",bibtex:'@article{Leeuw2023jsPsych, 	author = {de Leeuw, Joshua R. and Gilbert, Rebecca A. and Luchterhandt, Bj{\\" o}rn}, 	journal = {Journal of Open Source Software}, 	doi = {10.21105/joss.05351}, 	issn = {2475-9066}, 	number = {85}, 	year = {2023}, 	month = {may 11}, 	pages = {5351}, 	publisher = {Open Journals}, 	title = {jsPsych: Enabling an {Open}-{Source} {Collaborative} {Ecosystem} of {Behavioral} {Experiments}}, 	url = {https://joss.theoj.org/papers/10.21105/joss.05351}, 	volume = {8}, }  '}};class y{constructor(r){this.jsPsych=r}trial(r,t){for(var e=0;e<t.questions.length;e++)typeof t.questions[e].rows=="undefined"&&(t.questions[e].rows=1);for(var e=0;e<t.questions.length;e++)typeof t.questions[e].columns=="undefined"&&(t.questions[e].columns=40);for(var e=0;e<t.questions.length;e++)typeof t.questions[e].value=="undefined"&&(t.questions[e].value="");var s="";t.preamble!==null&&(s+='<div id="jspsych-survey-text-preamble" class="jspsych-survey-text-preamble">'+t.preamble+"</div>"),t.autocomplete?s+='<form id="jspsych-survey-text-form">':s+='<form id="jspsych-survey-text-form" autocomplete="off">';for(var i=[],e=0;e<t.questions.length;e++)i.push(e);t.randomize_question_order&&(i=this.jsPsych.randomization.shuffle(i));for(var e=0;e<t.questions.length;e++){var o=t.questions[i[e]],a=i[e];s+='<div id="jspsych-survey-text-'+a+'" class="jspsych-survey-text-question" style="margin: 2em 0em;">',s+='<p class="jspsych-survey-text">'+o.prompt+"</p>";var u=e==0?"autofocus":"",l=o.required?"required":"";o.rows==1?s+='<input type="text" id="input-'+a+'"  name="#jspsych-survey-text-response-'+a+'" data-name="'+o.name+'" size="'+o.columns+'" '+u+" "+l+' placeholder="'+o.placeholder+'"></input>':s+='<textarea id="input-'+a+'" name="#jspsych-survey-text-response-'+a+'" data-name="'+o.name+'" cols="'+o.columns+'" rows="'+o.rows+'" '+u+" "+l+' placeholder="'+o.placeholder+'"></textarea>',s+="</div>"}s+='<input type="submit" id="jspsych-survey-text-next" class="jspsych-btn jspsych-survey-text" value="'+t.button_label+'"></input>',s+="</form>",r.innerHTML=s,r.querySelector("#input-"+i[0]).focus(),r.querySelector("#jspsych-survey-text-form").addEventListener("submit",T=>{T.preventDefault();for(var x=performance.now(),j=Math.round(x-P),c={},p=0;p<t.questions.length;p++){var q="Q"+p,d=document.querySelector("#jspsych-survey-text-"+p).querySelector("textarea, input"),b=d.value,m=d.attributes["data-name"].value;m==""&&(m=q);var h={};h[m]=b,Object.assign(c,h)}var g={rt:j,response:c};this.jsPsych.finishTrial(g)});var P=performance.now()}simulate(r,t,e,s){t=="data-only"&&(s(),this.simulate_data_only(r,e)),t=="visual"&&this.simulate_visual(r,e,s)}create_simulation_data(r,t){const e={};let s=1e3;for(const a of r.questions){const u=a.name?a.name:`Q${r.questions.indexOf(a)}`,l=a.rows==1?this.jsPsych.randomization.sampleExponential(.25):this.jsPsych.randomization.randomInt(1,10)*a.rows;e[u]=this.jsPsych.randomization.randomWords({exactly:l,join:" "}),s+=this.jsPsych.randomization.sampleExGaussian(2e3,400,.004,!0)}const i={response:e,rt:s},o=this.jsPsych.pluginAPI.mergeSimulationData(i,t);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(r,o),o}simulate_data_only(r,t){const e=this.create_simulation_data(r,t);this.jsPsych.finishTrial(e)}simulate_visual(r,t,e){const s=this.create_simulation_data(r,t),i=this.jsPsych.getDisplayElement();this.trial(i,r),e();const o=Object.entries(s.response).map(a=>a[1]);for(let a=0;a<o.length;a++)this.jsPsych.pluginAPI.fillTextInput(i.querySelector(`#input-${a}`),o[a],(s.rt-1e3)/o.length*(a+1));this.jsPsych.pluginAPI.clickTarget(i.querySelector("#jspsych-survey-text-next"),s.rt)}}return y.info=v,y}(jsPsychModule);
//# sourceMappingURL=https://unpkg.com/@jspsych/plugin-survey-text@2.1.0/dist/index.browser.min.js.map
