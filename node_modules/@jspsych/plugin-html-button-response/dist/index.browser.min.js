var jsPsychHtmlButtonResponse=function(s){"use strict";var y="2.1.0";const b={name:"html-button-response",version:y,parameters:{stimulus:{type:s.ParameterType.HTML_STRING,default:void 0},choices:{type:s.ParameterType.STRING,default:void 0,array:!0},button_html:{type:s.ParameterType.FUNCTION,default:function(m,t){return`<button class="jspsych-btn">${m}</button>`}},prompt:{type:s.ParameterType.HTML_STRING,default:null},stimulus_duration:{type:s.ParameterType.INT,default:null},trial_duration:{type:s.ParameterType.INT,default:null},button_layout:{type:s.ParameterType.STRING,default:"grid"},grid_rows:{type:s.ParameterType.INT,default:1},grid_columns:{type:s.ParameterType.INT,default:null},response_ends_trial:{type:s.ParameterType.BOOL,default:!0},enable_button_after:{type:s.ParameterType.INT,default:0}},data:{rt:{type:s.ParameterType.INT},response:{type:s.ParameterType.INT},stimulus:{type:s.ParameterType.HTML_STRING}},citations:{apa:"de Leeuw, J. R., Gilbert, R. A., & Luchterhandt, B. (2023). jsPsych: Enabling an Open-Source Collaborative Ecosystem of Behavioral Experiments. Journal of Open Source Software, 8(85), 5351. https://doi.org/10.21105/joss.05351 ",bibtex:'@article{Leeuw2023jsPsych, 	author = {de Leeuw, Joshua R. and Gilbert, Rebecca A. and Luchterhandt, Bj{\\" o}rn}, 	journal = {Journal of Open Source Software}, 	doi = {10.21105/joss.05351}, 	issn = {2475-9066}, 	number = {85}, 	year = {2023}, 	month = {may 11}, 	pages = {5351}, 	publisher = {Open Journals}, 	title = {jsPsych: Enabling an {Open}-{Source} {Collaborative} {Ecosystem} of {Behavioral} {Experiments}}, 	url = {https://joss.theoj.org/papers/10.21105/joss.05351}, 	volume = {8}, }  '}};class c{constructor(t){this.jsPsych=t}trial(t,e){const n=document.createElement("div");n.id="jspsych-html-button-response-stimulus",n.innerHTML=e.stimulus,t.appendChild(n);const r=document.createElement("div");if(r.id="jspsych-html-button-response-btngroup",e.button_layout==="grid"){if(r.classList.add("jspsych-btn-group-grid"),e.grid_rows===null&&e.grid_columns===null)throw new Error("You cannot set `grid_rows` to `null` without providing a value for `grid_columns`.");const a=e.grid_columns===null?Math.ceil(e.choices.length/e.grid_rows):e.grid_columns,o=e.grid_rows===null?Math.ceil(e.choices.length/e.grid_columns):e.grid_rows;r.style.gridTemplateColumns=`repeat(${a}, 1fr)`,r.style.gridTemplateRows=`repeat(${o}, 1fr)`}else e.button_layout==="flex"&&r.classList.add("jspsych-btn-group-flex");for(const[a,o]of e.choices.entries()){r.insertAdjacentHTML("beforeend",e.button_html(o,a));const u=r.lastChild;u.dataset.choice=a.toString(),u.addEventListener("click",()=>{_(a)})}t.appendChild(r),e.prompt!==null&&t.insertAdjacentHTML("beforeend",e.prompt);var i=performance.now(),l={rt:null,button:null};const p=()=>{var a={rt:l.rt,stimulus:e.stimulus,response:l.button};this.jsPsych.finishTrial(a)};function _(a){var o=performance.now(),u=Math.round(o-i);l.button=parseInt(a),l.rt=u,n.classList.add("responded");for(const f of r.children)f.setAttribute("disabled","disabled");e.response_ends_trial&&p()}if(e.stimulus_duration!==null&&this.jsPsych.pluginAPI.setTimeout(()=>{n.style.visibility="hidden"},e.stimulus_duration),e.enable_button_after>0){for(var h=document.querySelectorAll("#jspsych-html-button-response-btngroup button"),d=0;d<h.length;d++)h[d].setAttribute("disabled","disabled");this.jsPsych.pluginAPI.setTimeout(()=>{for(var a=document.querySelectorAll("#jspsych-html-button-response-btngroup button"),o=0;o<a.length;o++)a[o].removeAttribute("disabled")},e.enable_button_after)}e.trial_duration!==null&&this.jsPsych.pluginAPI.setTimeout(p,e.trial_duration)}simulate(t,e,n,r){e=="data-only"&&(r(),this.simulate_data_only(t,n)),e=="visual"&&this.simulate_visual(t,n,r)}create_simulation_data(t,e){const n={stimulus:t.stimulus,rt:this.jsPsych.randomization.sampleExGaussian(500,50,.006666666666666667,!0)+t.enable_button_after,response:this.jsPsych.randomization.randomInt(0,t.choices.length-1)},r=this.jsPsych.pluginAPI.mergeSimulationData(n,e);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(t,r),r}simulate_data_only(t,e){const n=this.create_simulation_data(t,e);this.jsPsych.finishTrial(n)}simulate_visual(t,e,n){const r=this.create_simulation_data(t,e),i=this.jsPsych.getDisplayElement();this.trial(i,t),n(),r.rt!==null&&this.jsPsych.pluginAPI.clickTarget(i.querySelector(`#jspsych-html-button-response-btngroup [data-choice="${r.response}"]`),r.rt)}}return c.info=b,c}(jsPsychModule);
//# sourceMappingURL=https://unpkg.com/@jspsych/plugin-html-button-response@2.1.0/dist/index.browser.min.js.map
